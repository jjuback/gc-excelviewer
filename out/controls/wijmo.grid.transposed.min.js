/*!
    *
    * Wijmo Library 5.20201.664
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();!function(e){!function(t){!function(t){var n=function(t){__extends(TransposedGrid,t);function TransposedGrid(n,o){var r=t.call(this,n,null)||this;r._keyPrefix="item";r._autoGenRows=!0;e.addClass(r.hostElement,"wj-transposed-grid");r.allowSorting=e.grid.AllowSorting.None;r.headersVisibility=e.grid.HeadersVisibility.Row;r._rowInfo=new e.grid.ColumnCollection(r,r.columns.defaultSize);r.initialize(o);r._rowInfo.collectionChanged.addHandler(r._rowInfoChanged,r);r.deferUpdate((function(){var e=r.rowHeaders.columns;if(e.length){e[e.length-1].width=r.columns.defaultSize}}));return r}Object.defineProperty(TransposedGrid.prototype,"autoGenerateRows",{get:function(){return this._autoGenRows},set:function(t){this._autoGenRows=e.asBoolean(t)},enumerable:!0,configurable:!0});TransposedGrid.prototype.refresh=function(e){var n=this._rowInfo;if(n._dirty){n._dirty=!1;this._rowInfoChanged()}else t.prototype.refresh.call(this,e)};Object.defineProperty(TransposedGrid.prototype,"allowAddNew",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0});Object.defineProperty(TransposedGrid.prototype,"allowDelete",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0});TransposedGrid.prototype.onRowEditEnded=function(n){if(null!=this._view){var o=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change);this._view.collectionChanged.raise(this._view,o)}t.prototype.onRowEditEnded.call(this,n)};TransposedGrid.prototype._getCollectionView=function(n){var o=this,r=null;null!=this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);if(e.isArray(n))n=this._transposeItemsSource(n);else if(n){this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);this._view=e.tryCast(n,"ICollectionView");if(this._view){this._view.collectionChanged.addHandler(this._sourceViewChanged,this);n instanceof e.collections.CollectionView&&(r=n.getError);n=this._transposeItemsSource(this._view.items)}}this.autoGenerateColumns=!0;var i=t.prototype._getCollectionView.call(this,n);r&&i instanceof e.collections.CollectionView&&(this._supportsProxies()?i.getError=function(e,t){var n=e._keys.indexOf(t);return r(e._arr[n],e._bnd.path)}:i.getError=function(e,t){var n=parseInt(t.substr(o._keyPrefix.length));return r(e._arr[n],e._rowInfo.binding)});return i};TransposedGrid.prototype._getColumnTypes=function(t){var n=this;if(this._view){var o=this._view.items;if(e.isArray(o))return o.map((function(t,o){return{binding:n._keyPrefix+o,dataType:e.DataType.Object}}))}return e.getTypes(t)};TransposedGrid.prototype._copy=function(n,o){var r=this;if(/rows|columns/.test(n)){e.assert(e.isArray(o),"Array Expected.");this._rowInfo.deferUpdate((function(){r.autoGenerateRows=!1;r._rowInfo.clear();o.forEach((function(t){var n=new e.grid.Column(t);r._rowInfo.push(n)}))}));return!0}return t.prototype._copy.call(this,n,o)};TransposedGrid.prototype.onLoadedRows=function(n){for(var o=this,r=this.rowHeaders.columns,i=0;i<r.length;i++)r[i].align="left";var s=this.columns;for(i=0;i<s.length;i++){var a=s[i];a.align=null;a.dataType=0}var d=e.grid.FlexGrid._getSerializableProperties(e.grid.Row);this.rows.forEach((function(t){var n=t.dataItem._rowInfo;if(n){for(var i in n)if(d.indexOf(i)>-1&&"showDropDown"!=i){var s=n[i];if(!e.isUndefined(s))try{t[i]=s}catch(e){}}if(r.length){var a=n.header||e.toHeaderCase(n.binding);o.rowHeaders.setCellData(t.index,r.length-1,a)}}}));t.prototype.onLoadedRows.call(this,n)};TransposedGrid.prototype._rowInfoChanged=function(){var t=this;this._toRowInfo&&clearTimeout(this._toRowInfo);this._toRowInfo=setTimeout((function(){var e=t.selection,n=t.itemsSource;t.itemsSource=null;t.itemsSource=n;t.selection=e}),e.Control._REFRESH_INTERVAL)};TransposedGrid.prototype._sourceViewChanged=function(e,t){this.activeEditor||this.invalidate()};TransposedGrid.prototype._transposeItemsSource=function(t){var n=this,o=new e.collections.ObservableArray,r=e.getTypes(t),i=t.map((function(e,t){return n._keyPrefix+t}));(this.autoGenerateRows?this._getRowInfo(t):this._rowInfo).forEach((function(s,a){var d=new e.Binding(s.binding);if(!s.dataType){var l=d.getValue(t[0]);s.dataType=null!=l?e.getType(l):r[a].dataType}if(n._supportsProxies()){var c=n._createProxy(t,s,i);o.push(c)}else{var u=n._createTransposedObject(t,s,n._keyPrefix);o.push(u)}}));t instanceof e.collections.ObservableArray&&t.collectionChanged.addHandler((function(){var t=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Reset);o.onCollectionChanged(t);n._rowInfoChanged()}));return o};TransposedGrid.prototype._supportsProxies=function(){return null!=window.Proxy};TransposedGrid.prototype._createProxy=function(t,n,o){var r={_arr:t,_rowInfo:n,_bnd:new e.Binding(n.binding),_keys:o};return new Proxy(r,{ownKeys:function(e){return e._keys},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0,writable:!0}},get:function(e,t){var n=e._keys.indexOf(t);return n>-1?e._bnd.getValue(e._arr[n]):e[t]},set:function(t,n,o){var r=t._keys.indexOf(n);if(r>-1){var i=t._arr,s=i[r];t._bnd.setValue(s,o);if(i instanceof e.collections.ObservableArray){var a=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change,s,r);i.onCollectionChanged(a)}return!0}return!1}})};TransposedGrid.prototype._createTransposedObject=function(t,n,o){for(var r={_arr:t,_rowInfo:n},i=new e.Binding(n.binding),_loop_1=function(n){var s=t[n];Object.defineProperty(r,o+n,{enumerable:!0,get:function(){return i.getValue(s)},set:function(o){i.setValue(s,o);if(t instanceof e.collections.ObservableArray){var r=new e.collections.NotifyCollectionChangedEventArgs(e.collections.NotifyCollectionChangedAction.Change,s,n);t.onCollectionChanged(r)}return!0}})},s=0;s<t.length;s++)_loop_1(s);return r};TransposedGrid.prototype._getRowInfo=function(t){var n=this,o=[];e.getTypes(t).forEach((function(t){var r=t.binding,i=t.dataType;if(i!=e.DataType.Object&&i!=e.DataType.Array){var s={binding:r,header:e.toHeaderCase(r),dataType:i},a=e.grid.FlexGrid._defTypeWidth[i];if(null!=a){if(e.isString(a)){var d=Math.round(parseFloat(a));a=a.indexOf("*")<0?d:d*n.columns.defaultSize}e.isNumber(a)&&a>0&&(s.width=a)}o.push(s)}}));return o};return TransposedGrid}(e.grid.FlexGrid);t.TransposedGrid=n;var o=function(e){__extends(TransposedGridRow,e);function TransposedGridRow(){return null!==e&&e.apply(this,arguments)||this}return TransposedGridRow}(e.grid.Column);t.TransposedGridRow=o}(t.transposed||(t.transposed={}))}(e.grid||(e.grid={}))}(wijmo||(wijmo={}));!function(e){!function(t){t.transposed||(t.transposed={}),e._registerModule("wijmo.grid.transposed",e.grid.transposed)}(e.grid||(e.grid={}))}(wijmo||(wijmo={}));